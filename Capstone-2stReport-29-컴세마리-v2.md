## Team-Info


| **(1) 과제명** | 빠른 여가 선택을 도와주는 1:1 맞춤형 영화/공연/전시 추천 서비스 |
|:---|:---|
| **(2) 팀 번호 / 팀 이름** | 29-컴세마리 |
| **(3) 팀 구성원** | 김민수(2130005): 리더, 프론트엔드  <br> 문지현(2276108): 팀원, 백엔드 <br> 서혜지(2171019): 팀원, AI |
| **(4) 팀 지도교수** | 심재형 교수님 |
| **(5) 과제 분류** | 산학 |
| **(6) 과제 키워드** | AI, 공공 데이터, 맞춤형 여가 추천 |
| **(7) 과제 내용 요약** | 사용자의 취향을 분석하여 최적의 여가 활동을 제안하는 1:1 맞춤형 영화/공연/전시 추천 서비스입니다. <br>최신 영화, 공연, 전시의 다양한 정보를 한 곳에서 조회할 수 있는 기능을 제공합니다. 사용자와 챗봇 간의 대화를 통해 사용자의 취향 데이터를 수집하고, 추천 알고리즘을 통해 해당 서비스 내에서 핵심 기능인 사용자 맞춤형 여가 추천 기능을 수행합니다. 추천 알고리즘은 사용자들이 경험한 여가에 남긴 평점 데이터가 축적될수록 더욱 정교해집니다. |

## Project-Summary

| 항목 | 내용 |
|:---|:---|
| **(1) 문제 정의** | 현재 공연, 영화, 전시의 정보들은 개인 블로그, SNS, 전용 사이트 등에 흩어져 있어서 정보를 탐색하기 위해서는 많은 시간을 투자해야 합니다. *하지만 시간과 장소가 정해진 관람형 문화생활을 즐기고 싶어하는 사람들의 대부분은 자신의 취향, 일정, 위치에 맞는 여가를 하나하나 확인하여 예약하기에 시간과 여유가 없습니다. 또한, 여가 선택지가 너무나 다양하기 때문에 이 중에서 자신에게 맞는 여가를 선택하기가 어렵습니다. 이러한 상황에서 1) 흩어진 여가 정보를 찾는 데 많은 시간이 들어 불편함을 겪는 사람, 2) 여가 정보를 찾을 시간이 부족한 사람, 3) 자신에게 맞는 관람형 여가를 추천받고 싶은 사람을 Target customer로 지정하였고, 이들의 빠른 여가 선택을 돕는 서비스를 기획했습니다.* |
| **(2) 기존 연구와의 비교** | - **문화 빅데이터 플랫폼 - 여가 추천 서비스** : 사용자가 위치 정보 제공을 동의하고 카테고리를 선택하면, 공공성/위치/트렌드 기반으로 여가 장소를 추천 <br> **장점:** 위치 기반이기 때문에 당장 여가를 즐기고 싶을 때 유용, 전국의 정보를 가지고 있어 어디서나 사용 가능 <br> **단점:** 오로지 위치만 기준이므로 이용 만족도가 낮을 수 있음, 사용자의 취향을 반영하지 않음 <br><br> - **여가콕** : 설문을 기반으로 사용자 맞춤 여가를 추천하는 서비스 <br> **장점:** 설문 조사를 통해 맞춤 여가활동 분석, 여가 시설 쿠폰 정보 제공 <br> **단점:** 여가 지역이 강남구로 제한됨, 최신 데이터 반영이 느림 <br><br> - **프립** : 호스트가 주최하는 여가 모임 참여 서비스 <br> **장점:** 다양한 여가 종류 포함, 예약 및 결제 가능 <br> **단점:** 비용이 많이 듦, 개인이 직접 여가를 선택해야 함 <br><br> **⇒ 기존의 선행 서비스들은 여가 카테고리나 장소를 단순히 탐색할 수 있도록 하는 반면, FOREST는 여가 선택에 드는 시간을 줄여주기 위해 사용자의 취향을 고려한 1:1 맞춤형 영화/공연/전시 추천 서비스를 제공한다는 점에서 차별점을 갖습니다.**  |
| **(3) 제안 내용** | 1. 한 번에 모아볼 수 있는 통합 서비스: 여러 곳에 흩어져 있는 여가 정보를 한 눈에 볼 수 있고 탐색할 수 있는 서비스 <br> 2. 사용자의 일정에 맞는 여가를 예약할 수 있는 서비스: 사용자의 개인 일정에 따라 자동으로 필터링 되어 여가를 보여주는 서비스 <br>3. 사용자의 취향에 맞는 여가를 예약할 수 있는 서비스: 사용자의 개인 취향에 따른 여가 선택을 돕는 서비스 <br>4. 사용자가 예약할만한 여가를 빠르게 추천해주는 서비스: 사용자의 취향, 일정, 위치에 맞는 여가만을 자동으로 보여주어 사용자가 최선의 여가 선택을 할 수 있도록 돕는 서비스 |
| **(4) 기대효과 및 의의** | 영화/공연/전시 관람자가 증가하고 해당 산업의 규모가 확장되어, 더욱 다채로운 관람형 문화 생활을 경험할 수 있는 기회를 제공할 것입니다. 사용자의 취향에 따라 추천하기 때문에, 주류 중심의 문화 산업에서 비주류도 알려지는 기회를 제공하여 다양한 문화 형성에 기여합니다. 또한, 많은 사람들이 자신에게 맞는 여가 활동을 즐기면서 스트레스를 해소하여 삶의 질을 높이게 되고, 정신 건강 개선에 따른 사회적 비용 절감과 같은 효과도 기대할 수 있습니다. 경제적 관점에서는 영화/공연/전시 배급사와의 협력을 통해 홍보와 수수료 기반의 수익 구조를 구축함으로써 사업적 가치를 창출할 수 있습니다. |
| **(5) 주요 기능 리스트** |  ***1.영화/공연/전시 API를 연동해 통합 및 최신 데이터 반영*** : 흩어져 있는 여가 데이터를 한 곳에서 모아 볼 수 있도록 합니다. <br> **2.여가 통합 검색** : 영화/공연/전시 API에서 받아온 데이터 중 사용자가 검색한 키워드에 해당하는 여가 리스트를 반환합니다. <br> **3.추천 시스템** : 협력 필터링과 콘텐츠 기반 추천을 함께 사용하는 하이브리드 추천 알고리즘을 사용합니다. 사용자의 취향 데이터를 활용해 사용자 맞춤형 추천 여가 리스트를 작성합니다. <br> **4.맞춤형 여가 추천 리스트** : 추천 알고리즘에 의해 선정된 추천 리스트를 반환합니다. 카테고리별, 거리순, 리뷰순 정렬을 제공합니다. <br> **5.사용자 취향 데이터 수집용 챗봇** : 사용자와 챗봇 간의 대화를 통해 취향 데이터를 키워드 형식으로 추출합니다. 챗봇은 사용자가 이전에 경험했던 여가나 좋아하는 장르와 같은 대화 주제를 활용하여 사용자의 선호 정보를 직·간접적으로 이끌어냅니다. <br> **6.사용자 취향 프로필** : 챗봇과의 대화에서 추출한 키워드와 사용자가 이전에 남긴 평점 및 리뷰를 통해 사용자의 취향 프로필을 작성해 저장·업데이트하고 추천 알고리즘에 반영합니다. <br> **7.평점 및 리뷰작성** : 사용자가 경험한 여가들에 대해 자신의 만족도를 평점으로 남기고, 리뷰를 작성할 수 있습니다. 작성된 내용은 추천 시스템에 반영되며, 여가 탐색 시 여가 정보와 함께 사용자들이 남긴 리뷰를 볼 수 있습니다. <br> **8.여가 찜하기** : 마음에 드는 여가를 찜하고 한곳에서 모아볼 수 있습니다. <br> **9.여가 예약등록** : 사용자가 여가를 예약한 후 여가 예정 날짜를 등록하면, 이를 한곳에서 모아볼 수 있습니다. <br> **10.소셜 로그인** : 사용자의 취향 프로필을 생성하고, 정보를 효율적으로 저장 및 불러오기 위해 사용합니다. <br> 11.**구글 캘린더 연동** : 사용자의 일정을 불러와 사용자의 일정과 겹치지 않는 여가만을 볼 수 있게 합니다. <br> **12.지도 API 연동** : 리스트에 포함된 여가 시설을 사용자의 위치와의 거리 순으로 정렬하기 위해 사용합니다. |

## Project-Design & Implementation

| 항목 | 내용 |
|:---|:---|
| **(1) 요구사항 정의** | - 사용자 요구사항 문서 <br> <img src="https://github.com/25-1-Capston-FOREST/FOREST_DOC/blob/main/Images/UserRequirement.png"> - E-R 다이어그램 <br> <img src="https://github.com/25-1-Capston-FOREST/FOREST_DOC/blob/main/Images/ERD.png"> |
| **(2) 전체 시스템 구성** | <img src="https://github.com/25-1-Capston-FOREST/FOREST_DOC/blob/main/Images/시스템구조도.png"> |
| **(3) 주요 엔진 및 기능 설계** | *1. 챗봇 모듈 <br>: OpenAI API의 gpt 3.5 turbo 모델을 사용. 사용자 취향 데이터를 얻기 위한 대화를 나눈다. 정밀한 추천을 위해서는 챗봇이 사용자가 자신의 취향을 구체적으로 드러낼 수 있도록 질문을 생성하도록 한다. 사용자의 답변에 따라 다른 맞춤형 질문을 생성해 효과적으로 정보를 수집할 수 있게 챗봇 설계한다. <br> (a) 대화형 질문 자동화 <br> - OpenAI의 GPT-3.5 Turbo 모델을 기반으로, Flask 서버에서 사용자와 자연스러운 대화를 주고받도록 설계한다. <br> - 초기 대화에서는 “최근에 감상한 영화나 공연, 전시가 있으신가요?”, “어떤 장르를 선호하시나요?”, “특별히 기억에 남는 작품은 있으신가요?” 등 사용자의 취향, 선호 장르, 감상 경험, 관람 방식 등에 대해 묻는 질문을 자동 생성한다. <br>- 사용자의 응답 결과에 따라 챗봇이 새로운 후속 질문을 생성해, 점진적으로 더 정밀한 개인화 정보를 수집한다. <br> (b) Few-shot 프롬프트 적용 <br> - 챗봇이 더 자연스럽게 일관성 있는 대화를 이끌어내고 목적에서 벗어난 질문을 하지 않도록 프롬프트에 예시 질문-답변 쌍을 제공해 프롬프팅한다.*<br><br> *2. 키워드 추출 모듈 <br>: 챗봇 모듈에서 받은 사용자 응답에서 추천 모듈에 활용할 주요 키워드를 추출한다. 주요 키워드는 영화/공연/전시의 장르나 분위기 등 사용자의 취향을 알 수 있는 단어들로 설정한다. 키워드 추출에는 챗봇 모듈에 활용한 openAI API의 gpt 3.5 turbo 모델과 KoNLPy의 Okt를 사용한다. <br>(a) 한국어 명사 기반 주요 키워드 추출<br> - 사용자가 입력한 응답 문장에서 불필요한 문장 부호 및 특수 기호를 제거한 뒤, 한국어 형태소 분석기(KoNLPy의 Okt)를 이용해 명사 단위로 주요 키워드 후보를 추출한다.<br>- 불용어 및 사용자 취향 데이터로 사용하기에 부적절한 단어는 필터링해 실제로 의미 있는 단어만 선별한다.<br>(b) GPT 기반 키워드 보조 추출 <br> - 명사 분석만으로 잡아내기 어려운 ‘의미 있는 취향 키워드(복합 장르, 분위기, 등)’를 보완하기 위해 OpenAI GPT-3.5 turbo 모델을 활용, 문장의 대표 키워드를 추가로 추출하도록 프롬프트 기반 보조 분석을 진행한다. <br> - 이때, 시스템 메시지에서 gpt의 역할이 취향 키워드를 추출하는 것임을 명시하고 사용자의 실제 응답을 그대로 입력한 뒤, GPT의 응답에서 키워드 목록을 얻어낸다. <br> (c) 키워드 후보 통합 및 중복 제거 <br> - 위의 두 과정을 통해 수집된 키워드 후보 리스트를 통합한 후, 중복되는 키워드를 제거해 최종 후보군을 도출한다. <br> (d) 감성 분석을 통한 긍정 키워드 선별 <br> - 추출된 키워드 후보들에 대해 openAI GPT-3.5 turbo로 감성 분석을 실시하여, 사용자 응답 맥락에서 긍정적인 의미를 갖는 키워드만을 선별한다.* <br><br> *3. 추천 모듈 <br> 1-1. 사용 라이브러리 <br> - scikit-learn - 데이터 벡터화를 위한 도구 TfidfVectorizer를 사용한다. cosine_similarity 메서드를 활용하여 키워드 형식의 사용자 취향 데이터와 아이템(여가) 간의 유사도를 계산한다. <br> - Surprise - 사용자-아이템 평점 데이터를 분석한 뒤, SVD(행렬 분해) 기법을 통해 각 사용자와 아이템의 잠재적 요인을 추출한다. 이를 기반으로 사용자가 평가하지 않은 아이템의 평점을 예측한다. <br> 1-2. 구현 과정 <br> (a) 초기 단계 - 평점 데이터 부족으로 협력 필터링 추천이 불가능할 시  콘텐츠 기반 추천만 이용해 추천 리스트 생성 <br> - 사용자 취향 데이터 수집 - 챗봇 모듈과 키워드 추출 모듈을 통해 생성된 사용자 취향 프로필 데이터를 데이터베이스에서 받아온다. <br> - 데이터 벡터화 - 받아온 사용자 데이터와 여가 아이템 데이터 간의 유사도를 계산하기 위해 TfidfVectorizer를 활용해 TF-IDF 행렬로 변환한다. <br> - 여가 아이템과의 유사도 계산 - 코사인 유사도 함수를 활용하여, 수집된 사용자 키워드와 각 여가 아이템의 키워드 간의 유사도를 계산한다. <br> - 추천 리스트 생성 - 사용자의 각 분야(영화/공연/전시)별 선호도와 유사도 상위 아이템의 분야별 비율을 조정해 추천 리스트를 생성한다. <br> (b) 평점 데이터가 충분할 때 - 콘텐츠 기반 추천과 협력 필터링 둘 다 사용하는 하이브리드 추천 방식으로 추천 리스트 생성 <br> - 평점 데이터 수집 및 데이터셋 구축 - 데이터베이스에서 평점 데이터를 받아와 서프라이즈 라이브러리 전용 데이터셋 형식(유저-아이템-평점)으로 변환한다. <br> - 데이터 분할 - 수집된 평점 데이터를 학습 및 검증 세트로 나눈다. <br> - 모델 생성 및 학습 - Surprise의 SVD 클래스를 이용하여 모델 객체를 생성하고 학습 데이터셋을 이용하여 SVD 모델을 학습한다. <br> - 예측 평점 계산 - 학습된 SVD 모델을 이용하여 사용자가 아직 평가하지 않은 아이템에 대한 예측 평점을 계산한다. <br> - 추천 후보군 추출 및 유사도 계산 - 예측 평점 상위 아이템들을 추천 후보군으로 지정하고 이 아이템들과 사용자 취향 프로필 간의 유사도를 계산한다. <br> - 추천 리스트 생성 - 추천 후보군 중 높은 유사도의 아이템들을 (a)에서 추천 리스트를 생성했던 것과 같이 분야별 비율을 조정해 추천 리스트를 생성한다.*<br><br> 4. 데이터 수집: OpenAPI <br> - 영화 상영 정보(https://www.kobis.or.kr/kobisopenapi/homepg/apiservice/searchServiceInfo.do) <br> - 공연/전시 정보(https://www.data.go.kr/data/15000120/openapi.do) <br><br> 5. 기타 API <br> - 구글 캘린더(https://calendar.google.com/) <br> - 네이버 지도API(https://www.ncloud.com/) <br><br> 6. 사용자 CRUD 데이터 <br> - 기능: 사용자 정보, 찜/예약/리뷰 데이터 처리 <br> - DB: MySQL <br> - 배포: AWS RDS(https://aws.amazon.com/ko/rds/) |
| **(4) 주요 기능의 구현** | ***1.사용자 취향 데이터 수집을 위한 챗봇** <br> (1) 사용자가 네비게이션 바를 통해 챗봇 대화 창에 진입하면, 클라이언트(웹)는 백엔드 서버에 사용자 아이디를 요청한다. <br> (2) 백엔드는 Flask 서버에 요청을 전달한다. <br> (3) Flask 서버는 질문을 생성해 백엔드 서버로 전달하고, 백엔드는 해당 질문을 프론트엔드에 전달하여 챗봇 UI에 출력한다. <br> (4) 사용자는 질문에 응답하며, 프론트엔드는 이 응답을 백엔드로 전송하고, 백엔드는 답변을 그대로 Flask 서버에 전달한다. <br> (5) Flask 서버는 사용자 답변에 따라 더 자세한 정보를 얻기 위한 질문을 생성한다.  <br> (6) 설정해둔 대화 횟수가 충족될때까지 혹은 사용자가 챗봇과의 대화를 그만하기 원할 때까지 (3)~(5)를 반복한다. <br> (7) Flask 서버는 사용자 답변에 자연어 처리(키워드 추출, 감성 분석)를 진행하여 얻어진 키워드를 데이터베이스의 취향 프로필에 저장한다. 이때, 저장하는 키워드는 추출된 키워드 중 사용자가 긍정적인 반응을 보인 것으로 한정한다. <br><br>**2.사용자 취향 맞춤형 추천**<br>(1) 사용자가 웹 사이트의 메인 페이지에 들어가면, 프론트엔드는 추천 리스트를 백엔드에 요청한다.<br> (2) 백엔드는 사용자 아이디를 포함하여, 추천 리스트 생성을 요청하는 API를 Flask 서버로 전달한다.<br> (3) Flask 서버는 데이터베이스에서 사용자 아이디에 해당하는 취향 프로필 데이터 및 해당 사용자의 평점 데이터를 요청한다. 이때, 취향 프로필 데이터가 챗봇 모듈과 키워드 추출 모듈을 통해 작성된 상태여야 한다. <br> (4) Flask 서버는 받아온 사용자 데이터(취향 프로필, 평점)를 활용해 추천 모듈을 수행하며, 수행 결과물인 activity_id(영화/공연/전시의 고유 아이디) 리스트를 백엔드에 반환한다.<br> (5) 백엔드는 받은 추천 리스트를 프론트엔드에 전달한다. <br> (6) 추천 리스트에 대한 정보(이미지, 여가 제목 등)를 grid 형식을 통해 메인페이지에 보여준다.<br><br> **3.영화/공연/전시 DB 최신 반영** <br> (1) 서버에서 영화/공연/전시 각각의 API에 데이터 요청을 보낸다.<br> (2) 해당 API에서 받아온 데이터를 각각 DB의 영화/공연/전시 테이블에 저장한다. <br> (3) 위 (1), (2) 로직을 크론을 이용해 매일 새벽 실행하여 최신 데이터가 반영되도록 유지한다.*<br>|
| **(5) 기타** | |

